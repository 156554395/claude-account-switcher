# 测试目录

本目录包含 `claude-account-switcher` 项目的单元测试。

## 目录结构

```
tests/
├── README.md              # 本文件
├── run_tests.js          # 测试运行器
└── unit/                 # 单元测试
    └── model_config.test.js  # 模型配置测试
```

## 运行测试

### 运行所有测试
```bash
node tests/run_tests.js
```

### 运行单个测试
```bash
node tests/unit/model_config.test.js
```

## 测试覆盖

### model_config.test.js
测试模型配置的默认值逻辑和环境变量设置：

- **测试 1**: 只配置主模型 → 其他模型默认为主模型
- **测试 2**: 配置主模型和小模型 → 小模型使用配置值，Opus默认为主模型
- **测试 3**: 配置所有模型 → 各模型使用配置值
- **测试 4**: 不配置任何模型 → 不添加模型环境变量
- **测试 5**: 验证 accounts.json 存储格式 → 只存储实际填写的字段
- **测试 6**: 验证 use.js 的显示逻辑 → 显示时使用默认值

## 测试原则

1. **独立性**: 每个测试独立运行，不依赖其他测试
2. **可恢复**: 测试前后会备份和恢复配置文件
3. **完整性**: 涵盖配置存储、环境变量设置、显示逻辑全流程

## 环境要求

- Node.js >= 18.0.0
- 无需额外依赖，使用项目本身的 ConfigManager